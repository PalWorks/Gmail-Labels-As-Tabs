{
  "version": 3,
  "sources": ["../../src/utils/storage.ts", "../../src/content.ts"],
  "sourcesContent": ["/**\n * storage.ts\n *\n * Helper functions for interacting with chrome.storage.sync.\n * Provides typed access to the extension's settings.\n */\n\nexport interface TabLabel {\n    name: string;\n    id: string; // Unique ID for drag and drop\n    displayName?: string;\n}\n\nexport interface Settings {\n    labels: TabLabel[];\n}\n\nconst DEFAULT_SETTINGS: Settings = {\n    labels: [],\n};\n\n/**\n * Retrieves the current settings from storage.\n */\nexport async function getSettings(): Promise<Settings> {\n    return new Promise((resolve) => {\n        chrome.storage.sync.get(DEFAULT_SETTINGS, (items) => {\n            resolve(items as Settings);\n        });\n    });\n}\n\n/**\n * Saves the settings to storage.\n */\nexport async function saveSettings(settings: Settings): Promise<void> {\n    return new Promise((resolve) => {\n        chrome.storage.sync.set(settings, () => {\n            resolve();\n        });\n    });\n}\n\n/**\n * Adds a new label to the list.\n */\nexport async function addLabel(labelName: string): Promise<void> {\n    const settings = await getSettings();\n    const newLabel: TabLabel = {\n        name: labelName.trim(),\n        id: crypto.randomUUID(),\n        displayName: labelName.trim(),\n    };\n    // Avoid duplicates\n    if (!settings.labels.some((l) => l.name === newLabel.name)) {\n        settings.labels.push(newLabel);\n        await saveSettings(settings);\n    }\n}\n\n/**\n * Removes a label by ID.\n */\nexport async function removeLabel(labelId: string): Promise<void> {\n    const settings = await getSettings();\n    settings.labels = settings.labels.filter((l) => l.id !== labelId);\n    await saveSettings(settings);\n}\n\n/**\n * Updates an existing label.\n */\nexport async function updateLabel(labelId: string, updates: Partial<TabLabel>): Promise<void> {\n    const settings = await getSettings();\n    const index = settings.labels.findIndex((l) => l.id === labelId);\n    if (index !== -1) {\n        settings.labels[index] = { ...settings.labels[index], ...updates };\n        await saveSettings(settings);\n    }\n}\n\n/**\n * Updates the order of labels.\n */\nexport async function updateLabelOrder(newLabels: TabLabel[]): Promise<void> {\n    const settings = await getSettings();\n    settings.labels = newLabels;\n    await saveSettings(settings);\n}\n", "/**\n * content.ts\n *\n * Main content script for Gmail Labels as Tabs.\n * Handles DOM injection, navigation monitoring, and tab rendering.\n */\n\nimport { getSettings, saveSettings, addLabel, removeLabel, updateLabelOrder, updateLabel, Settings, TabLabel } from './utils/storage';\n\n// Start the dropdown observer\n// initLabelDropdownObserver(); // Removed duplicate call\n\n// Selectors for Gmail elements\n// We target the main toolbar container to inject below it.\nconst TOOLBAR_SELECTORS = [\n    '.G-atb', // Main toolbar container (often has this class)\n    '.aeF > div:first-child', // Fallback\n];\n\nconst TABS_BAR_ID = 'gmail-labels-as-tabs-bar';\nconst MODAL_ID = 'gmail-labels-settings-modal';\n\nlet currentSettings: Settings | null = null;\nlet observer: MutationObserver | null = null;\n\n/**\n * Initialize the extension.\n */\nasync function init() {\n    currentSettings = await getSettings();\n\n    // Listen for storage changes to update tabs in real-time\n    chrome.storage.onChanged.addListener((changes, area) => {\n        if (area === 'sync' && changes.labels) {\n            currentSettings!.labels = changes.labels.newValue;\n            renderTabs();\n        }\n    });\n\n    // Initial render attempt\n    attemptInjection();\n\n    // Start observing DOM for navigation/loading\n    startObserver();\n\n    // Listen for URL changes (popstate)\n    window.addEventListener('popstate', handleUrlChange);\n\n    // Listen for messages from background script\n    chrome.runtime.onMessage.addListener((message, sender, sendResponse) => {\n        if (message.action === 'TOGGLE_SETTINGS') {\n            toggleSettingsModal();\n        }\n    });\n}\n\n/**\n * Attempt to inject the tabs bar.\n * Retries if the insertion point isn't found yet.\n */\nfunction attemptInjection() {\n    // If bar exists, check if it's in the right place (top)\n    const existingBar = document.getElementById(TABS_BAR_ID);\n\n    let injectionPoint: Element | null = null;\n    for (const selector of TOOLBAR_SELECTORS) {\n        // We want the visible toolbar\n        const candidates = document.querySelectorAll(selector);\n        for (const el of candidates) {\n            if (el.getBoundingClientRect().height > 0) {\n                injectionPoint = el;\n                break;\n            }\n        }\n        if (injectionPoint) break;\n    }\n\n    if (injectionPoint) {\n        if (!existingBar) {\n            const tabsBar = createTabsBar();\n            injectionPoint.insertAdjacentElement('afterend', tabsBar);\n            renderTabs();\n        } else if (existingBar.previousElementSibling !== injectionPoint) {\n            // Re-attach if moved\n            injectionPoint.insertAdjacentElement('afterend', existingBar);\n        }\n        updateActiveTab();\n    } else {\n        // Retry shortly if not found (Gmail loading)\n        setTimeout(attemptInjection, 500);\n    }\n}\n\n/**\n * Create the container for the tabs.\n */\nfunction createTabsBar(): HTMLElement {\n    const bar = document.createElement('div');\n    bar.id = TABS_BAR_ID;\n    bar.className = 'gmail-tabs-bar';\n    return bar;\n}\n\n/**\n * Render the tabs based on current settings.\n */\n/**\n * Render the tabs based on current settings.\n */\n/**\n * Render the tabs based on current settings.\n */\n/**\n * Render the tabs based on current settings.\n */\nfunction renderTabs() {\n    const bar = document.getElementById(TABS_BAR_ID);\n    if (!bar || !currentSettings) return;\n\n    bar.innerHTML = ''; // Clear existing\n\n    currentSettings.labels.forEach(label => {\n        const tab = document.createElement('div'); // Changed to div to handle nested clicks better\n        tab.className = 'gmail-tab';\n        tab.dataset.label = label.name;\n\n        // Tab Content (Name)\n        const nameSpan = document.createElement('span');\n        nameSpan.className = 'tab-name';\n        nameSpan.textContent = label.displayName || label.name;\n        tab.appendChild(nameSpan);\n\n        // Hover Actions Container\n        const actions = document.createElement('div');\n        actions.className = 'tab-actions';\n\n        // Edit Button (3 dots)\n        const editBtn = document.createElement('div');\n        editBtn.className = 'tab-action-btn edit-btn';\n        editBtn.innerHTML = '\u22EE'; // Vertical ellipsis\n        editBtn.title = 'Edit Tab';\n        editBtn.addEventListener('click', (e) => {\n            e.stopPropagation();\n            showEditModal(label);\n        });\n        actions.appendChild(editBtn);\n\n        // Delete Button (X)\n        const deleteBtn = document.createElement('div');\n        deleteBtn.className = 'tab-action-btn delete-btn';\n        deleteBtn.innerHTML = '\u2715';\n        deleteBtn.title = 'Remove Tab';\n        deleteBtn.addEventListener('click', async (e) => {\n            e.stopPropagation();\n            if (confirm(`Remove tab \"${label.displayName || label.name}\"?`)) {\n                await removeLabel(label.id);\n                currentSettings = await getSettings();\n                renderTabs();\n            }\n        });\n        actions.appendChild(deleteBtn);\n\n        tab.appendChild(actions);\n\n        // Main Tab Click (Navigation)\n        tab.addEventListener('click', () => {\n            window.location.href = getLabelUrl(label.name);\n        });\n\n        bar.appendChild(tab);\n    });\n\n    // Add \"Add Tab\" button\n    const addBtn = document.createElement('div');\n    addBtn.className = 'add-tab-btn';\n    addBtn.innerHTML = '+';\n    addBtn.title = 'Configure Tabs';\n    addBtn.addEventListener('click', (e) => {\n        e.stopPropagation();\n        toggleSettingsModal();\n    });\n    bar.appendChild(addBtn);\n\n    updateActiveTab();\n}\n\n// --- Edit Modal ---\nfunction showEditModal(label: TabLabel) {\n    const modal = document.createElement('div');\n    modal.className = 'gmail-tabs-modal';\n\n    modal.innerHTML = `\n        <div class=\"modal-content edit-tab-modal\">\n            <div class=\"modal-header\">\n                <h3>Edit Tab</h3>\n                <button class=\"close-btn\">\u2715</button>\n            </div>\n            <div class=\"modal-body\">\n                <div class=\"form-group\">\n                    <label>Label name (Original):</label>\n                    <input type=\"text\" value=\"${label.name}\" disabled class=\"disabled-input\">\n                </div>\n                <div class=\"form-group\">\n                    <label>Display Name:</label>\n                    <input type=\"text\" id=\"edit-display-name\" value=\"${label.displayName || label.name}\">\n                </div>\n                <div class=\"modal-actions\">\n                    <button id=\"edit-save-btn\" class=\"primary-btn\">Save</button>\n                </div>\n            </div>\n        </div>\n    `;\n\n    document.body.appendChild(modal);\n\n    const close = () => modal.remove();\n    modal.querySelector('.close-btn')?.addEventListener('click', close);\n    modal.addEventListener('click', (e) => {\n        if (e.target === modal) close();\n    });\n\n    modal.querySelector('#edit-save-btn')?.addEventListener('click', async () => {\n        const displayName = (modal.querySelector('#edit-display-name') as HTMLInputElement).value;\n\n        if (displayName) {\n            await updateLabel(label.id, {\n                displayName: displayName.trim()\n            });\n\n            close();\n            // Refresh settings and re-render\n            currentSettings = await getSettings();\n            renderTabs();\n        }\n    });\n}\n\n/**\n * Generate the URL for a given label.\n */\nfunction getLabelUrl(labelName: string): string {\n    const encoded = encodeURIComponent(labelName).replace(/%20/g, '+');\n    return `https://mail.google.com/mail/u/0/#label/${encoded}`;\n}\n\n/**\n * Highlight the active tab based on current URL.\n */\nfunction updateActiveTab() {\n    const hash = window.location.hash;\n    const bar = document.getElementById(TABS_BAR_ID);\n    if (!bar) return;\n\n    const tabs = bar.querySelectorAll('.gmail-tab');\n    tabs.forEach(t => {\n        const tab = t as HTMLElement;\n        const labelName = tab.dataset.label;\n        if (!labelName) return;\n\n        const cleanHash = decodeURIComponent(hash.replace('#label/', '').replace(/\\+/g, ' '));\n\n        if (cleanHash === labelName || hash.includes(`#label/${encodeURIComponent(labelName).replace(/%20/g, '+')}`)) {\n            tab.classList.add('active');\n        } else {\n            tab.classList.remove('active');\n        }\n    });\n}\n\nfunction handleUrlChange() {\n    updateActiveTab();\n}\n\nfunction startObserver() {\n    if (observer) observer.disconnect();\n\n    observer = new MutationObserver((mutations) => {\n        attemptInjection();\n        updateActiveTab();\n    });\n\n    observer.observe(document.body, {\n        childList: true,\n        subtree: true,\n    });\n}\n\n// --- Settings Modal Logic ---\n\nfunction toggleSettingsModal() {\n    let modal = document.getElementById(MODAL_ID);\n    if (modal) {\n        modal.remove();\n    } else {\n        createSettingsModal();\n    }\n}\n\nfunction createSettingsModal() {\n    const modal = document.createElement('div');\n    modal.id = MODAL_ID;\n    modal.className = 'gmail-tabs-modal';\n\n    modal.innerHTML = `\n        <div class=\"modal-content\">\n            <div class=\"modal-header\">\n                <h3>Configure Tabs</h3>\n                <button class=\"close-btn\">\u2715</button>\n            </div>\n            <div class=\"modal-body\">\n                <div class=\"input-group\">\n                    <input type=\"text\" id=\"modal-new-label\" placeholder=\"Label name (e.g. 'Work')\">\n                    <button id=\"modal-add-btn\">Add</button>\n                </div>\n                <ul id=\"modal-labels-list\"></ul>\n            </div>\n        </div>\n    `;\n\n    document.body.appendChild(modal);\n\n    // Event Listeners\n    modal.querySelector('.close-btn')?.addEventListener('click', () => modal.remove());\n    modal.addEventListener('click', (e) => {\n        if (e.target === modal) modal.remove();\n    });\n\n    const addBtn = modal.querySelector('#modal-add-btn') as HTMLButtonElement;\n    const input = modal.querySelector('#modal-new-label') as HTMLInputElement;\n    const list = modal.querySelector('#modal-labels-list') as HTMLUListElement;\n\n    const refreshList = async () => {\n        const settings = await getSettings();\n        list.innerHTML = '';\n        settings.labels.forEach((label, index) => {\n            const li = document.createElement('li');\n            li.innerHTML = `\n                <span>${label.name}</span>\n                <div class=\"actions\">\n                    ${index > 0 ? '<button class=\"up-btn\">\u2191</button>' : ''}\n                    ${index < settings.labels.length - 1 ? '<button class=\"down-btn\">\u2193</button>' : ''}\n                    <button class=\"remove-btn\">\u2715</button>\n                </div>\n            `;\n\n            li.querySelector('.remove-btn')?.addEventListener('click', async () => {\n                await removeLabel(label.id);\n                refreshList();\n            });\n\n            li.querySelector('.up-btn')?.addEventListener('click', async () => {\n                const newLabels = [...settings.labels];\n                [newLabels[index - 1], newLabels[index]] = [newLabels[index], newLabels[index - 1]];\n                await updateLabelOrder(newLabels);\n                refreshList();\n            });\n\n            li.querySelector('.down-btn')?.addEventListener('click', async () => {\n                const newLabels = [...settings.labels];\n                [newLabels[index + 1], newLabels[index]] = [newLabels[index], newLabels[index + 1]];\n                await updateLabelOrder(newLabels);\n                refreshList();\n            });\n\n            list.appendChild(li);\n        });\n    };\n\n    addBtn.addEventListener('click', async () => {\n        let value = input.value.trim();\n        if (value) {\n            // Remove \"label:\" prefix if present (case-insensitive)\n            if (value.toLowerCase().startsWith('label:')) {\n                value = value.substring(6).trim();\n            }\n\n            if (value) {\n                await addLabel(value);\n                input.value = '';\n                refreshList();\n            }\n        }\n    });\n\n    refreshList();\n}\n\n// --- Label Dropdown Integration ---\n\nfunction initLabelDropdownObserver() {\n    const observer = new MutationObserver((mutations) => {\n        for (const mutation of mutations) {\n            for (const node of mutation.addedNodes) {\n                if (node instanceof HTMLElement) {\n                    // Check if the added node is a menu or contains a menu\n                    if (node.classList.contains('J-M') || node.querySelector('.J-M')) {\n                        handleMenuOpen(node);\n                    }\n                }\n            }\n        }\n    });\n\n    observer.observe(document.body, {\n        childList: true,\n        subtree: true\n    });\n}\n\nfunction handleMenuOpen(container: HTMLElement) {\n    // Gmail menus often have role=\"menu\"\n    const menu = container.classList.contains('J-M') ? container : container.querySelector('.J-M');\n    if (!menu) return;\n\n    // Check if this is a label menu by looking for specific items\n    // \"Label colour\" is a strong indicator\n    const labelColorItem = Array.from(menu.querySelectorAll('div')).find(el => el.textContent === 'Label colour' || el.textContent === 'Label color');\n\n    if (labelColorItem) {\n        injectLabelOptions(menu as HTMLElement);\n    }\n}\n\nfunction injectLabelOptions(menu: HTMLElement) {\n    // Avoid double injection\n    if (menu.querySelector('.gmail-tabs-option')) return;\n\n    // Find the label name. This is tricky as it's not directly in the menu.\n    // Usually the menu is triggered by a button that has the label name or ID.\n    // Or we can look at the active element or the element that triggered the menu.\n    // For now, let's try to find the separator to insert after.\n    const separator = menu.querySelector('.J-M-Jz'); // Common separator class\n\n    // Create our options\n    const addToTabsItem = createMenuItem('Add to tabs', async () => {\n        const labelName = getLabelNameFromTrigger();\n        if (labelName) {\n            await addLabel(labelName);\n            renderTabs();\n            menu.style.display = 'none'; // Close menu\n        }\n    });\n\n    const addWithSubItem = createMenuItem('Add to tabs (including sublabels)', async () => {\n        const labelName = getLabelNameFromTrigger();\n        if (labelName) {\n            // TODO: Implement sublabel logic. For now just add the main label.\n            await addLabel(labelName);\n            renderTabs();\n            menu.style.display = 'none';\n        }\n    });\n\n    // Insert at the top or after \"Label colour\"\n    if (menu.firstChild) {\n        menu.insertBefore(addWithSubItem, menu.firstChild);\n        menu.insertBefore(addToTabsItem, menu.firstChild);\n\n        // Add a separator\n        const sep = document.createElement('div');\n        sep.className = 'J-M-Jz gmail-tabs-separator';\n        sep.setAttribute('role', 'separator');\n        sep.style.userSelect = 'none';\n        menu.insertBefore(sep, addWithSubItem.nextSibling?.nextSibling || null);\n    }\n}\n\nfunction createMenuItem(text: string, onClick: () => void): HTMLElement {\n    const item = document.createElement('div');\n    item.className = 'J-N J-Ks gmail-tabs-option'; // Gmail menu item classes\n    item.setAttribute('role', 'menuitem');\n    item.style.userSelect = 'none';\n\n    item.innerHTML = `\n        <div class=\"J-N-Jz\">\n            <div class=\"J-N-C\">\n                <div class=\"J-N-J5\"></div>\n            </div>\n            <div class=\"J-N-T\">${text}</div>\n        </div>\n    `;\n\n    item.addEventListener('mouseenter', () => {\n        item.classList.add('J-N-JT'); // Hover state\n    });\n    item.addEventListener('mouseleave', () => {\n        item.classList.remove('J-N-JT');\n    });\n    item.addEventListener('click', (e) => {\n        e.stopPropagation();\n        onClick();\n    });\n\n    return item;\n}\n\nfunction getLabelNameFromTrigger(): string | null {\n    // This is the hardest part: finding which label was clicked.\n    // When a menu opens, the trigger element usually has 'aria-expanded=\"true\"'.\n    // In the sidebar, the label element usually has a title or text content.\n\n    // Look for the active menu button\n    const activeBtn = document.querySelector('div[aria-expanded=\"true\"][role=\"button\"], span[aria-expanded=\"true\"]');\n    if (activeBtn) {\n        // Traverse up to find the label container\n        // The structure varies. Often the button is inside a container that has the label name in a 'title' attribute or text.\n        // For sidebar labels:\n        // <div class=\"CL\" ...>\n        //   <div class=\"TO\" ...>\n        //      <div class=\"n0\" title=\"Label Name\">Label Name</div>\n        //   </div>\n        // </div>\n\n        // Let's try to find a 'title' attribute in the vicinity\n        let parent = activeBtn.parentElement;\n        while (parent && parent.tagName !== 'BODY') {\n            const labelNameEl = parent.querySelector('[title]');\n            if (labelNameEl) {\n                const title = labelNameEl.getAttribute('title');\n                if (title && title !== 'Label colour') return title;\n            }\n            // Also check if the parent itself has a title (common for the row)\n            if (parent.getAttribute('title')) {\n                return parent.getAttribute('title');\n            }\n            parent = parent.parentElement;\n            if (parent && parent.classList.contains('aim')) break; // 'aim' is often the row container\n        }\n    }\n    return null;\n}\n\n// Run init\nif (document.readyState === 'loading') {\n    document.addEventListener('DOMContentLoaded', init);\n} else {\n    init();\n}\n\n// Start the dropdown observer\ninitLabelDropdownObserver();\n"],
  "mappings": "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",
  "names": ["observer"]
}
